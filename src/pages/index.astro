---
import EditorCV from "../components/EditorCV";
import PreviewCV from "../components/PreviewCV";
import ExportButtons from "../components/ExportButtons";
import ValidationHints from "../components/ValidationHints";
import ThemeToggle from "../components/ThemeToggle";
import "../styles/global.css";
---

<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>CV Creator - MVP</title>
		<script is:inline>
			(function () {
				const stored = localStorage.getItem('cvcreator-theme');
				if (stored === 'dark') document.documentElement.classList.add('dark');
				else document.documentElement.classList.remove('dark');
			})();
		</script>
	</head>
	<body class="bg-background text-foreground min-h-screen transition-colors duration-300">
		<main class="container mx-auto p-4 h-screen flex flex-col">
			<header class="mb-6 flex-none flex justify-between items-start gap-4">
				<div>
					<h1 class="text-4xl font-bold text-foreground">CV Creator</h1>
					<p class="text-muted-foreground">
						Edita tu currículum en Markdown y expórtalo a PDF o Word.
					</p>
				</div>
				<ThemeToggle client:load />
			</header>

			<!-- Export Section -->
			<section class="flex-none mb-4">
				<ExportButtons client:load />
			</section>

			<div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 min-h-0">
				<!-- Editor wrapper -->
				<section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
					<EditorCV client:load />
				</section>

				<!-- Preview wrapper -->
				<section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
					<PreviewCV client:load />
				</section>
			</div>

			<!-- Validations Section -->
			<section class="mt-4 flex-none">
				<ValidationHints client:load />
			</section>
		</main>
	</body>
</html>
