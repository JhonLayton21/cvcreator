---
import EditorCV from "../components/EditorCV";
import PreviewCV from "../components/PreviewCV";
import ExportButtons from "../components/ExportButtons";
import ValidationHints from "../components/ValidationHints";
import ThemeToggle from "../components/ThemeToggle";
import "../styles/global.css";
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>CV Creator - MVP</title>
    <script is:inline>
      (function () {
        const stored = localStorage.getItem("cvcreator-theme");
        if (stored === "dark") document.documentElement.classList.add("dark");
        else document.documentElement.classList.remove("dark");
      })();
    </script>
  </head>
  <body
    class="bg-background text-foreground min-h-screen transition-colors duration-300"
  >
    <main class="container mx-auto p-4 h-screen flex flex-col">
      <header class="flex-none border-b border-border">

  {/* TOP BAR */}
  <div class="flex items-center justify-between py-2">

    {/* LEFT — Info */}
    <div class="text-sm text-muted-foreground flex items-center gap-2">
      <span>Hecho con</span>
      <span class="text-white">❤</span>
      <span>
        por
        <span class="ml-1 font-medium dark:text-white text-slate-900">
          <a href="https://github.com/JhonLayton21" target="_blank" class="hover:underline transition">Jhon Brandon Layton Rodriguez</a> 
        </span>
      </span>
    </div>

    {/* RIGHT — Social + Theme */}
    <div class="flex items-center gap-4">

      {/* GitHub */}
      <a
        href="https://github.com/JhonLayton21/cvcreator"
        target="_blank"
        rel="noopener noreferrer"
        class="dark:text-white dark:hover:text-slate-200 text-slate-800 transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 .5A12 12 0 0 0 8.2 23.9c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.5-1.3-1.2-1.7-1.2-1.7-1-.7.1-.7.1-.7 1.1.1 1.7 1.2 1.7 1.2 1 .1.7 2.2 3.5 1.6.1-.8.4-1.4.7-1.7-2.6-.3-5.3-1.3-5.3-5.9 0-1.3.5-2.3 1.2-3.1-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.2 1.2a11 11 0 0 1 5.8 0c2.2-1.5 3.2-1.2 3.2-1.2.6 1.6.2 2.8.1 3.1.8.8 1.2 1.8 1.2 3.1 0 4.6-2.7 5.6-5.3 5.9.4.3.8 1 .8 2v3c0 .3.2.7.8.6A12 12 0 0 0 12 .5z"/>
        </svg>
      </a>

      {/* LinkedIn */}
      <a
        href="https://www.linkedin.com/in/jhon-layton/"
        target="_blank"
        rel="noopener noreferrer"
        class="dark:text-white dark:hover:text-slate-200 text-slate-800 transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M4.98 3.5C4.98 4.88 3.86 6 2.49 6S0 4.88 0 3.5 1.12 1 2.49 1s2.49 1.12 2.49 2.5zM.5 8h4v15h-4V8zm7 0h3.8v2h.1c.5-1 1.8-2 3.7-2 4 0 4.7 2.6 4.7 6v9h-4v-8c0-1.9 0-4.3-2.6-4.3-2.6 0-3 2-3 4.2v8.1h-4V8z"/>
        </svg>
      </a>

      <ThemeToggle client:load />

    </div>

  </div>

  {/* PAGE TITLE */}
  <div class="py-6 text-center">
    <h1 class="text-4xl font-bold text-foreground">
      CV Creator
    </h1>

    <p class="text-muted-foreground mt-2">
      Edita tu currículum en Markdown y expórtalo a PDF o Word.
    </p>
  </div>

</header>

      <!-- Export Section -->
      <section class="flex-none mb-4">
        <ExportButtons client:load />
      </section>

      <div
        class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 min-h-0"
      >
        <!-- Editor wrapper -->
        <section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
          <EditorCV client:load />
        </section>

        <!-- Preview wrapper -->
        <section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
          <PreviewCV client:load />
        </section>
      </div>

      <!-- Validations Section -->
      <section class="mt-4 flex-none">
        <ValidationHints client:load />
      </section>
    </main>
  </body>
</html>
