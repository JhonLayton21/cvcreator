---
import EditorCV from "../components/EditorCV";
import PreviewCV from "../components/PreviewCV";
import ExportButtons from "../components/ExportButtons";
import ValidationHints from "../components/ValidationHints";
import ThemeToggle from "../components/ThemeToggle";
import "../styles/global.css";
import { Linkedin, Github } from "lucide-react";
import { Badge } from "@/components/ui/badge";
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>CV Creator - MVP</title>
    <script is:inline>
      (function () {
        const stored = localStorage.getItem("cvcreator-theme");
        if (stored === "dark") document.documentElement.classList.add("dark");
        else document.documentElement.classList.remove("dark");
      })();
    </script>
  </head>
  <body
    class="bg-background text-foreground min-h-screen transition-colors duration-300"
  >
    <main class="container mx-auto p-4 h-screen flex flex-col">
      <header class="flex-none border-b border-border">
        {/* TOP BAR */}
        <div class="flex items-center justify-between py-2">
          {/* LEFT — Info */}
          <div class="text-sm text-muted-foreground flex items-center gap-2">
            <span>Hecho con</span>
            <span class="text-white">❤</span>
            <span>
              por
              <span class="ml-1 font-medium dark:text-white text-slate-900">
                <a
                  href="https://github.com/JhonLayton21"
                  target="_blank"
                  class="hover:underline transition"
                  >Jhon Brandon Layton Rodriguez</a
                >
              </span>
            </span>
          </div>

          {/* RIGHT — Social + Theme */}
          <div class="flex items-center gap-4">
            {/* GitHub */}
            <a
              href="https://github.com/JhonLayton21/cvcreator"
              target="_blank"
              rel="noopener noreferrer"
              class="dark:text-white text-black transition-colors"
            >
              <Github className="h-6 w-6" />
            </a>

            {/* LinkedIn */}
            <a
              href="https://www.linkedin.com/in/jhon-layton/"
              target="_blank"
              rel="noopener noreferrer"
              class="dark:text-white text-black transition-colors"
            >
              <Linkedin className="h-6 w-6" />
            </a>

            <ThemeToggle client:load />
          </div>
        </div>

        {/* PAGE TITLE */}
        <div class="py-6 text-center">
          <h1 class="text-4xl font-bold text-foreground">CV Creator.</h1>

          <p class="text-muted-foreground mt-2 mb-2">
            Crea tu currículum optimizado para sistemas ATS y expórtalo en
            múltiples formatos.
          </p>

          <Badge
            className="px-4 py-1 text-sm font-medium bg-green-100 text-green-700 hover:bg-green-100 border border-green-700"
          >
            Diseñado para superar filtros automatizados de reclutamiento.
          </Badge>
        </div>
      </header>

      <!-- Export Section -->
      <section class="flex-none mb-4">
        <ExportButtons client:load />
      </section>

      <div
        class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 min-h-0"
      >
        <!-- Editor wrapper -->
        <section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
          <EditorCV client:load />
        </section>

        <!-- Preview wrapper -->
        <section class="flex flex-col min-h-[42vh] lg:min-h-[400px] lg:h-full">
          <PreviewCV client:load />
        </section>
      </div>

      <!-- Validations Section -->
      <section class="mt-4 flex-none">
        <ValidationHints client:load />
      </section>
    </main>
  </body>
</html>
